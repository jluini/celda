[gd_scene load_steps=9 format=2]

[ext_resource path="res://games/celda_escape/rooms/office/images/Office-BG.jpg" type="Texture" id=1]
[ext_resource path="res://games/celda_escape/rooms/office/images/Mesa.png" type="Texture" id=2]
[ext_resource path="res://games/celda_escape/rooms/office/images/Silla-Of1.png" type="Texture" id=3]
[ext_resource path="res://tools/grog/room.gd" type="Script" id=4]
[ext_resource path="res://tools/2d/item2d.gd" type="Script" id=5]
[ext_resource path="res://games/celda_escape/rooms/office/images/Armor-Of1.png" type="Texture" id=6]
[ext_resource path="res://games/celda_escape/rooms/office/images/Busto-Of1.png" type="Texture" id=7]

[sub_resource type="NavigationPolygon" id=1]
vertices = PoolVector2Array( 380.204, 838.492, 1231.84, 680.592, 1405.11, 653.384, 1489.6, 667.704, 1522.53, 699.207, 1349.27, 573.194, 1178.86, 600.401, 613.231, 574.626, 802.251, 603.265, 759.292, 686.32, 1715.85, 700.639, 1720.39, 837.408 )
polygons = [ PoolIntArray( 0, 1, 2, 3, 4 ), PoolIntArray( 5, 2, 1, 6 ), PoolIntArray( 7, 5, 6, 8 ), PoolIntArray( 7, 8, 9, 0 ), PoolIntArray( 10, 11, 0, 4 ), PoolIntArray( 9, 1, 0 ) ]
outlines = [ PoolVector2Array( 1720.39, 837.408, 1715.85, 700.639, 1522.53, 699.207, 1489.6, 667.704, 1405.11, 653.384, 1349.27, 573.194, 613.231, 574.626, 380.204, 838.492 ), PoolVector2Array( 759.292, 686.32, 1231.84, 680.592, 1178.86, 600.401, 802.251, 603.265 ) ]

[node name="office" type="Node2D"]
script = ExtResource( 4 )
default_player_position_path = NodePath("default_player_position")
navigation_path = NodePath("Navigation2D")

[node name="background" type="Node2D" parent="."]

[node name="background" type="Sprite" parent="background"]
z_index = -4096
texture = ExtResource( 1 )
centered = false

[node name="chair" type="Sprite" parent="background"]
position = Vector2( 1027.05, 663.363 )
z_index = -250
texture = ExtResource( 3 )

[node name="table" type="Sprite" parent="background"]
position = Vector2( 1006.34, 738.386 )
z_index = -240
texture = ExtResource( 2 )

[node name="bust" type="Sprite" parent="background"]
position = Vector2( 1578.32, 685.625 )
z_index = -1080
texture = ExtResource( 7 )

[node name="armor" type="Sprite" parent="background"]
position = Vector2( 436.556, 530.523 )
z_index = -1080
texture = ExtResource( 6 )

[node name="Navigation2D" type="Navigation2D" parent="."]

[node name="NavigationPolygonInstance" type="NavigationPolygonInstance" parent="Navigation2D"]
position = Vector2( -270, 0 )
scale = Vector2( 1.27, 1.27 )
navpoly = SubResource( 1 )

[node name="default_player_position" type="Position2D" parent="."]
position = Vector2( 420.202, 867.626 )

[node name="test_position" type="Position2D" parent="."]
position = Vector2( 722.732, 774.828 )

[node name="pos1" type="Position2D" parent="."]
position = Vector2( 1736.08, 974.77 )

[node name="items" type="Node2D" parent="."]

[node name="duct" type="Node2D" parent="items"]
position = Vector2( 170.901, 241.02 )
script = ExtResource( 5 )
item_key = "office/duct"
interact_angle = 200
code = "
walk_to:
	if $stage < 3:
		.load_room celda
		.set music=sufre
	else:
		.load_room celda_open
		.set music=uajari
	
	.curtain_up
	you.teleport to=pos4 angle=150"
radius = 75.0

[node name="interact_position" type="Position2D" parent="items/duct"]
position = Vector2( 226.821, 625.248 )

[node name="bust" type="Node2D" parent="items"]
position = Vector2( 1571.01, 591.886 )
script = ExtResource( 5 )
item_key = "office/bust"
color = Color( 0.164706, 0.647059, 0.815686, 1 )
interact_angle = 350
code = "
look_at:
	you.say \"Es un busto.\"
	.set bust_turn = not $bust_turn
	if $bust_turn:
		self.say \"Igualmente.\"
	else:
		self.say \"El busto es mÃ­o.\""
radius = 70.0

[node name="interact_position" type="Position2D" parent="items/bust"]
position = Vector2( -88.1641, 216.144 )

[node name="speech_position" type="Position2D" parent="items/bust"]
position = Vector2( 2.27527, -89.8704 )

[node name="to_living" type="Node2D" parent="items"]
position = Vector2( 1799.96, 957.241 )
script = ExtResource( 5 )
item_key = "office/to_living"
code = "walk_to:
	.load_room living
	.curtain_up"
radius = 150.0
